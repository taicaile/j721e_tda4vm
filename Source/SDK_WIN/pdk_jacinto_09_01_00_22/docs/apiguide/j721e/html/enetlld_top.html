<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<title>PDK API Guide for J721E: Enet LLD Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PDK API Guide for J721E
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('enetlld_top.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Enet LLD Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
 <h1><a class="anchor" id="enetlld_intro"></a>
Introduction</h1>
<p>The Unified Ethernet Low-Level Driver (Enet LLD) is a PDK driver that aims at providing an unified interface for the different Ethernet peripherals found in TI SoCs.</p>
<p>The Enet LLD is composed of the following layers: top-layer APIs, peripheral layer, module layer and CSL. The diagram below depicts the layers in the Enet LLD.</p>
<div class="image">
<img src="EnetLLD_Diagram.png" alt="EnetLLD_Diagram.png"/>
<div class="caption">
Enet LLD Block Diagram</div></div>
<p><a class="el" href="index.html">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="enetlld_api_overview"></a>
Application Programming Interface</h1>
<p>The Enet LLD provides two sets of APIs: control and DMA.</p>
<h2>Control path API</h2>
<p>The control API is an IOCTL-based interface which is used by applications to control the Ethernet peripheral and its submodules.</p>
<p>For further details on the top-level control APIs, refer to the <a class="el" href="group__ENET__MAIN__API.html">Enet Main API</a>.</p>
<h2>Data path (DMA) API</h2>
<p>The DMA API is used by applications to perform data movement related operations, such as opening and closing DMA channels, submitting and retrieving packets from the underlying DMA controller.</p>
<p>For further details on the top-level control APIs, refer to the <a class="el" href="group__ENET__DMA__API.html">Enet Data Path (DMA)</a>.</p>
<h2>Life cycle of an Enet LLD based application</h2>
<p>The following diagram shows the usage of Enet LLD top-level APIs by local and remote clients.</p>
<div class="image">
<img src="Enet_Lifecycle.png" alt="Enet_Lifecycle.png"/>
<div class="caption">
Enet LLD life cycle</div></div>
<p><a class="el" href="index.html">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="enetlld_enetpers"></a>
Enet Peripherals</h1>
<p>Enet LLD supports only CPSW families of Ethernet devices. ICSSG is not supported.</p>
<h2><a class="anchor" id="enetper_cpsw"></a>
CPSW Peripheral</h2>
<p>Jacinto 7 family devices offer networking functionality through the Gigabit Ethernet MAC (MCU_CPSW0) and the Gigabit Ethernet Switch (CPSW0) subsystems. They provide Ethernet packet communication between the connected port(s) and the System on Chip. The total number of ports include host port which is an internal port providing the packet streaming interface to the device internal cores. The external ports are MAC ports supporting Media Independent Interface (MII) like MII, Gigabit Media Independent Interface (GMII), Reduced Media Independent Interface (RMII), Reduced Gigabit Media Independent Interface (RGMII), Serial Gigabit Media Independent Interface (SGMII) and Quad Serial Gigabit Media Independent Interface (QSGMII). The MII modes supported vary based on device variant.</p>
<p><b>MCU_CPSW0</b> is a two-port CPSW switch instance: one MAC port and a CPPI DMA host port. It's commonly referred to as <b>CPSW2G</b>.</p>
<p><b>CPSW0</b> is an integrated Ethernet switch IP with nine-port: eight MAC ports and a CPPI DMA host port. This CPSW instance is referred to as <b>CPSW9G</b> throughout most documentation and code. The CPSW9G switch facilitates the transfer of data between external ports along with internal traffic. Any core of Jacinto 7 devices can transmit/receive data to/from the switch.</p>
<p>CPSW9G is a shared resource and the Ethernet Switch Firmware is the software running on Main domain R5F of Jacinto 7, used for configuration, coordination and management of CPSW9G resources between internal processing cores and external ports. The Ethernet Switch Firmware software is mainly based on the PDK Enet low-level driver (Enet LLD), but also relies on other PDK drivers like UDMA for data transfers to the internal processing cores.</p>
<h3><a class="anchor" id="cpsw_external_switch_replacement"></a>
CPSW as a replacement to External Switch</h3>
<p>The diagram below show the comparison of a typical automotive system using an external switch and an MCU, with a similar system on Jacinto 7 with integrated Ethernet switch.</p>
<div class="image">
<img src="CPSW_External_Switch_Replacement.png" alt="CPSW_External_Switch_Replacement.png"/>
<div class="caption">
CPSW as Replacement to External Switch Block Diagram</div></div>
<hr/>
 <h1><a class="anchor" id="enetlld_integration"></a>
Integration</h1>
<p>The following diagram shows an example of the Enet LLD integration in a J721E device of the Jacinto 7 family. In this integration example, the <em>Ethernet Firmware</em> is built on top of the Enet LLD which provides an abstraction to the underlying functionality of the ENET_CPSW_9G Ethernet peripheral.</p>
<div class="image">
<img src="EnetLLD_Jacinto7.png" alt="EnetLLD_Jacinto7.png"/>
<div class="caption">
Enet LLD integration in Jacinto 7 devices</div></div>
<p><a class="el" href="index.html">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="enetlld_hist"></a>
Document Revision History</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Revision  </th><th class="markdownTableHeadNone">Date  </th><th class="markdownTableHeadNone">Author  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Status   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.1  </td><td class="markdownTableBodyNone">17 Aug 2020  </td><td class="markdownTableBodyNone">Misael Lopez  </td><td class="markdownTableBodyNone">First version  </td><td class="markdownTableBodyNone">Draft   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
